<?

require_once 'crest/crest.php';

$registerButtonResult = CRest::call(
	'landing.repo.register', [
		'code' => 'button-for-increasing',
		'fields' => [
			'NAME' => 'Кнопка "Версия для слабовидящих"',
			'DESCRIPTION' => 'Тест',
			'SECTIONS' => 'Viasite,other',
			'CONTENT' => '<div class="button-for-increasing-container">
                            <a href="#panel-for-increasing-content" class="button-for-increasing">
                                <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M4.88913 20C3.92224 20.0001 2.97703 19.7033 2.17303 19.147C1.36904 18.5907 0.74237 17.7999 0.372281 16.8747C0.00219127 15.9495 -0.094697 14.9314 0.0938683 13.9492C0.282434 12.967 0.747983 12.0647 1.43164 11.3565C2.1153 10.6484 2.98636 10.1661 3.93467 9.97066C4.88298 9.77524 5.86594 9.87548 6.75924 10.2587C7.65254 10.6419 8.41607 11.2909 8.95326 12.1236C9.49045 12.9562 9.77717 13.9352 9.77717 14.9367C9.77572 16.279 9.26029 17.5659 8.34393 18.5151C7.42757 19.4643 6.18513 19.9984 4.88913 20ZM4.88913 11.5743C4.24692 11.5742 3.61911 11.7714 3.08508 12.1408C2.55106 12.5103 2.13482 13.0355 1.88901 13.65C1.64319 14.2646 1.57885 14.9408 1.70411 15.5932C1.82937 16.2456 2.13862 16.8448 2.59273 17.3152C3.04684 17.7855 3.62542 18.1058 4.25529 18.2355C4.88517 18.3653 5.53804 18.2986 6.13135 18.044C6.72465 17.7894 7.23173 17.3583 7.58846 16.8052C7.94518 16.2521 8.13553 15.6018 8.13542 14.9367C8.13499 14.0448 7.7929 13.1897 7.18426 12.5588C6.57562 11.928 5.75017 11.5731 4.88913 11.5721V11.5743Z"
                                        fill="black" />
                                    <path
                                        d="M17.112 20C16.1451 20.0001 15.1999 19.7033 14.3959 19.147C13.5919 18.5907 12.9652 17.7999 12.5951 16.8747C12.225 15.9495 12.1281 14.9314 12.3167 13.9492C12.5053 12.967 12.9708 12.0647 13.6545 11.3565C14.3381 10.6484 15.2092 10.1661 16.1575 9.97066C17.1058 9.77524 18.0888 9.87548 18.9821 10.2587C19.8754 10.6419 20.6389 11.2909 21.1761 12.1236C21.7133 12.9562 22 13.9352 22 14.9367C21.9987 16.279 21.4833 17.566 20.5669 18.5153C19.6505 19.4645 18.408 19.9985 17.112 20ZM17.112 11.5743C16.4698 11.5742 15.8419 11.7714 15.3079 12.1408C14.7739 12.5103 14.3576 13.0355 14.1118 13.65C13.866 14.2646 13.8017 14.9408 13.9269 15.5932C14.0522 16.2456 14.3614 16.8448 14.8156 17.3152C15.2697 17.7855 15.8482 18.1058 16.4781 18.2355C17.108 18.3653 17.7609 18.2986 18.3542 18.044C18.9475 17.7894 19.4546 17.3583 19.8113 16.8052C20.168 16.2521 20.3584 15.6018 20.3582 14.9367C20.3578 14.0448 20.0157 13.1897 19.4071 12.5588C18.7984 11.928 17.973 11.5731 17.112 11.5721V11.5743Z"
                                        fill="black" />
                                    <path
                                        d="M13.0448 15.7869H8.9563C8.73859 15.7869 8.52979 15.6973 8.37585 15.5379C8.22191 15.3784 8.13542 15.1621 8.13542 14.9367C8.13542 14.7112 8.22191 14.4949 8.37585 14.3355C8.52979 14.176 8.73859 14.0864 8.9563 14.0864H13.0448C13.2625 14.0864 13.4713 14.176 13.6252 14.3355C13.7792 14.4949 13.8657 14.7112 13.8657 14.9367C13.8657 15.1621 13.7792 15.3784 13.6252 15.5379C13.4713 15.6973 13.2625 15.7869 13.0448 15.7869Z"
                                        fill="black" />
                                    <path
                                        d="M0.82179 15.7869C0.604081 15.7869 0.395288 15.6973 0.241344 15.5379C0.0874003 15.3784 0.000915527 15.1621 0.000915527 14.9367V2.73487C0.000915527 2.00954 0.279108 1.31391 0.774295 0.801026C1.26948 0.288138 1.9411 0 2.6414 0C3.3417 0 4.01331 0.288138 4.5085 0.801026C5.00368 1.31391 5.28188 2.00954 5.28188 2.73487C5.28188 2.96037 5.19539 3.17662 5.04145 3.33607C4.8875 3.49552 4.67871 3.58509 4.461 3.58509C4.24329 3.58509 4.0345 3.49552 3.88056 3.33607C3.72661 3.17662 3.64013 2.96037 3.64013 2.73487C3.64013 2.46052 3.5349 2.19741 3.34761 2.00342C3.16031 1.80942 2.90628 1.70044 2.6414 1.70044C2.37652 1.70044 2.12249 1.80942 1.93519 2.00342C1.74789 2.19741 1.64267 2.46052 1.64267 2.73487V14.9367C1.64267 15.1621 1.55618 15.3784 1.40224 15.5379C1.24829 15.6973 1.0395 15.7869 0.82179 15.7869Z"
                                        fill="black" />
                                    <path
                                        d="M21.1791 15.7869C20.9614 15.7869 20.7526 15.6973 20.5987 15.5379C20.4447 15.3784 20.3583 15.1621 20.3583 14.9367V2.73487C20.3583 2.46052 20.253 2.19741 20.0657 2.00342C19.8784 1.80942 19.6244 1.70044 19.3595 1.70044C19.0946 1.70044 18.8406 1.80942 18.6533 2.00342C18.466 2.19741 18.3608 2.46052 18.3608 2.73487C18.3608 2.96037 18.2743 3.17662 18.1204 3.33607C17.9664 3.49552 17.7576 3.58509 17.5399 3.58509C17.3222 3.58509 17.1134 3.49552 16.9595 3.33607C16.8055 3.17662 16.719 2.96037 16.719 2.73487C16.719 2.00954 16.9972 1.31391 17.4924 0.801026C17.9876 0.288138 18.6592 0 19.3595 0C20.0598 0 20.7314 0.288138 21.2266 0.801026C21.7218 1.31391 22 2.00954 22 2.73487V14.9367C22 15.1621 21.9135 15.3784 21.7596 15.5379C21.6056 15.6973 21.3968 15.7869 21.1791 15.7869Z"
                                        fill="black" />
                                </svg>
                                Версия для слабовидящих
                            </a>
                        </div>'
		],
		'manifest' => [
			'nodes' => [
				'.button-for-increasing' => [
					'name' => 'Кнопка',
					'type' => 'link'
				]
			],
			'style' => [
				'.button-for-increasing' => [
					'name' => 'Кнопка',
					'type' => 'button'
				]
			],
			'assets' => [
				'js' => ['https://b24.viasite.ru/min/script.min.js?v0.4', 'https://b24.viasite.ru/min/speech.min.js?v0.4'],
				'css' => ['https://b24.viasite.ru/min/style.min.css?v0.4']
			]
		]
	]
);

$registerAssetsResult = CRest::call(
	'landing.repo.register', [
		'code' => 'assets-for-increasing',
		'fields' => [
			'NAME' => 'Исходники для версии сайта для слабовидящих',
			'DESCRIPTION' => 'Тест',
			'SECTIONS' => 'Viasite,other',
			'CONTENT' => '<div class="assets-for-panel-for-increasing-content" bxstyle="padding: 20px 0">
							assets for the panel for increasing a content
						</div>'
		],
		'manifest' => [
			'assets' => [
				'js' => ['https://b24.viasite.ru/min/script.min.js?v0.4', 'https://b24.viasite.ru/min/speech.min.js?v0.4'],
				'css' => ['https://b24.viasite.ru/min/style.min.css?v0.4']
			]
		]
	]
);

if (isset($registerAssetsResult['error']) || isset($registerButtonResult['error'])) {
	echo 'Ошибка: ' . $registerAssetsResult['error_description'];
} else {
	echo 'Блоки для добавления перехода в версию для слабовидящих успешно добавлены!';
}

// echo '<pre>';
// // print_r($registerAssetsResult);
// echo $registerButtonResult['error_description'];
// echo '</pre>';